<mat-drawer-container class="example-container">
    <mat-drawer #drawer mode="over" position="end"  class="vh-100 w-sm-100 w-md-50 w-lg-50  position-fixed rounded-0 bg-secondary-subtle menu-drawer">
        <app-basket  (closeDrawer)="drawer.close()"></app-basket>
    </mat-drawer>

    <mat-drawer-content class="bg-white">
        <!-- Enhanced Navigation Bar -->
        <mat-toolbar class="enhanced-navbar mat-elevation-z3">
            <div class="container-fluid">
                <div class="navbar-content">
                    <!-- Logo Section -->
                    <div class="nav-logo">
                        <button mat-icon-button class="menu-button d-lg-none" aria-label="Menu">
                            <mat-icon>menu</mat-icon>
                        </button>
                        <a routerLink="/" class="brand-link">
                            <img src="/logo.png" alt="Hana Shop" class="brand-logo">
                            <span class="brand-name">Hana Shop</span>
                        </a>
                    </div>

                    <!-- Navigation Links -->
                    <div class="nav-links d-none d-lg-flex">
                        <a routerLink="/" class="nav-link" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
                            <mat-icon>home</mat-icon>
                            <span>Home</span>
                        </a>
                        <a routerLink="/products" class="nav-link" routerLinkActive="active">
                            <mat-icon>shopping_bag</mat-icon>
                            <span>Products</span>
                        </a>
                        <a routerLink="/" fragment="categories" class="nav-link">
                            <mat-icon>category</mat-icon>
                            <span>Categories</span>
                        </a>
                        <a routerLink="/kiosk" class="nav-link" routerLinkActive="active">
                            <mat-icon>store</mat-icon>
                            <span>Kiosk</span>
                        </a>
                    </div>

                    <!-- Actions Section -->
                    <div class="nav-actions">
                        <!-- Wishlist Button -->
                        <button mat-icon-button class="action-button" aria-label="Wishlist" matTooltip="Wishlist">
                            <mat-icon>favorite_border</mat-icon>
                        </button>

                        <!-- Shopping Cart Button -->
                        <button mat-icon-button class="action-button cart-button" aria-label="Shopping Cart" (click)="drawer.toggle()" matTooltip="Cart">
                            <mat-icon>shopping_cart</mat-icon>
                            <span class="cart-badge" *ngIf="productsInBasketCount.getValue() > 0">
                                {{ productsInBasketCount.getValue() }}
                            </span>
                        </button>

                        <!-- User Menu - Show when authenticated -->
                        <div *ngIf="isAuthenticated" class="user-menu">
                            <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-button">
                                <mat-icon>account_circle</mat-icon>
                            </button>
                            <mat-menu #userMenu="matMenu" class="user-dropdown">
                                <div class="user-info">
                                    <mat-icon>person</mat-icon>
                                    <div class="user-details">
                                        <p class="user-name">{{ currentUser?.name }}</p>
                                        <p class="user-email">{{ currentUser?.email }}</p>
                                    </div>
                                </div>
                                <mat-divider></mat-divider>
                                <button mat-menu-item routerLink="/profile">
                                    <mat-icon>person</mat-icon>
                                    <span>My Profile</span>
                                </button>
                                <button mat-menu-item routerLink="/orders">
                                    <mat-icon>receipt_long</mat-icon>
                                    <span>My Orders</span>
                                </button>
                                <button mat-menu-item routerLink="/wishlist">
                                    <mat-icon>favorite</mat-icon>
                                    <span>Wishlist</span>
                                </button>
                                <button mat-menu-item routerLink="/admin" *ngIf="authService.isAdmin()">
                                    <mat-icon>admin_panel_settings</mat-icon>
                                    <span>Admin Panel</span>
                                </button>
                                <mat-divider></mat-divider>
                                <button mat-menu-item (click)="logout()">
                                    <mat-icon>logout</mat-icon>
                                    <span>Logout</span>
                                </button>
                            </mat-menu>
                        </div>

                        <!-- Auth Buttons - Show when not authenticated -->
                        <div *ngIf="!isAuthenticated" class="auth-buttons">
                            <button mat-button routerLink="/login" class="login-button">
                                <mat-icon>login</mat-icon>
                                <span class="d-none d-md-inline">Login</span>
                            </button>
                            <button mat-raised-button color="primary" routerLink="/register" class="register-button d-none d-sm-inline-flex">
                                Sign Up
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </mat-toolbar>

        <router-outlet></router-outlet>
    </mat-drawer-content>
</mat-drawer-container>
